const app=Vue.createApp({mixins:Object.values(mixins),data(){return{theme:localStorage.getItem("theme")||"auto",loading:true,hiddenMenu:false,showMenuItems:false,menuColor:false,scrollTop:0,renderers:[]}},created(){window.addEventListener("load",(()=>{this.loading=false}));if(this.theme==="auto")this.isSystemDarkMode()?this.setDarkMode(true):this.setDarkMode(false);else this.theme==="dark"?this.setDarkMode(true):this.setDarkMode(false);window.addEventListener("beforeunload",(()=>{if(this.theme==="auto")localStorage.removeItem("theme");else localStorage.setItem("theme",this.theme)}))},mounted(){window.addEventListener("scroll",this.handleScroll,true);this.render()},methods:{isSystemDarkMode(){return window.matchMedia("(prefers-color-scheme: dark)").matches},setDarkMode(e){if(e){document.documentElement.classList.add("dark");document.getElementById("highlight-style-dark").removeAttribute("disabled")}else{document.documentElement.classList.remove("dark");document.getElementById("highlight-style-dark").setAttribute("disabled","")}},handleThemeSwitch(){this.theme=(e=>{switch(e){case"auto":this.setDarkMode(false);return"light";case"light":this.setDarkMode(true);return"dark";case"dark":this.isSystemDarkMode()?this.setDarkMode(true):this.setDarkMode(false);return"auto"}})(this.theme)},render(){for(let e of this.renderers)e()},handleScroll(){let e=this.$refs.homePostsWrap;let t=document.documentElement.scrollTop;if(this.scrollTop<t){this.hiddenMenu=true;this.showMenuItems=false}else this.hiddenMenu=false;if(e){if(t<=window.innerHeight-100)this.menuColor=true;else this.menuColor=false;if(t<=400)e.style.top="-"+t/5+"px";else e.style.top="-80px"}this.scrollTop=t}}});app.mount("#layout");